#pragma once

#include <common/common.h>

namespace gbemu
{
    enum Opcode {
        kNop = 0x0,

        HALT = 0x76,

        kJP = 0xC3,
        JP_MHL = 0xe9,

        DAA = 0x27,

        JP_NZ_nn = 0xC2,
        JP_Z_nn = 0xCA,
        JP_NC_nn = 0xD2,
        JP_C_nn = 0xDA,

        // XOR
        kXOR_A = 0xAF,
        kXOR_B = 0xA8,
        kXOR_C = 0xA9,
        kXOR_D = 0xAA,
        kXOR_E = 0xAB,
        kXOR_H = 0xAC,
        kXOR_L = 0xAD,
        kXOR_HL = 0xAE,
        kXOR_STAR = 0xEE,

        // 8-bit loads
        LD_A_n = 0x3e,
        LD_B_n = 0x06,
        LD_C_n = 0x0E,
        LD_D_n = 0x16,
        LD_E_n = 0x1E,
        LD_H_n = 0x26,
        LD_L_n = 0x2E,

        LDD_HL_A = 0x32,
        LDI_HL_A = 0x22,

        LDI_A_HL = 0x2A,
        LDD_A_HL = 0x3A,

        // 16-bit loads
        LD_BC_nn = 0x01,
        LD_DE_nn = 0x11,
        LD_HL_nn = 0x21,
        LD_SP_nn = 0x31,

        LD_HL_SP_n = 0xF8,

        DEC_A = 0x3D,
        DEC_B = 0x05,
        DEC_C = 0x0D,
        DEC_D = 0x15,
        DEC_E = 0x1D,
        DEC_H = 0x25,
        DEC_L = 0x2D,
        DEC_MHL = 0x35,

        DEC_BC = 0x0B,
        DEC_DE = 0x1B,
        DEC_HL = 0x2B,
        DEC_SP = 0x3B,

        JR_NZ_n = 0x20,
        JR_Z_n = 0x28,
        JR_NC_n = 0x30,
        JR_C_n = 0x38,

        JR_n = 0x18,

        RRA = 0x1F,
        RRCA = 0x0F,

        RRC_A = 0xCB0F,
        RRC_B = 0xCB08,
        RRC_C = 0xCB09,
        RRC_D = 0xCB0A,
        RRC_E = 0xCB0B,
        RRC_H = 0xCB0C,
        RRC_L = 0xCB0D,
        RRC_MHL = 0xCB0E,

        SLA_A = 0xCB27,
        SLA_B = 0xCB20,
        SLA_C = 0xCB21,
        SLA_D = 0xCB22,
        SLA_E = 0xCB23,
        SLA_H = 0xCB24,
        SLA_L = 0xCB25,
        SLA_MHL = 0xCB26,

        SRA_A = 0xCB2F,
        SRA_B = 0xCB28,
        SRA_C = 0xCB29,
        SRA_D = 0xCB2A,
        SRA_E = 0xCB2B,
        SRA_H = 0xCB2C,
        SRA_L = 0xCB2D,
        SRA_MHL = 0xCB2E,

        OR_A = 0xB7,
        OR_B = 0xB0,
        OR_C = 0xB1,
        OR_D = 0xB2,
        OR_E = 0xB3,
        OR_H = 0xB4,
        OR_L = 0xB5,
        OR_HL = 0xB6,
        OR_STAR = 0xF6,

        INC_A = 0x3C,
        INC_B = 0x04,
        INC_C = 0x0C,
        INC_D = 0x14,
        INC_E = 0x1C,
        INC_H = 0x24,
        INC_L = 0x2C,
        INC_MHL = 0x34,

        INC_BC = 0x03,
        INC_DE = 0x13,
        INC_HL = 0x23,
        INC_SP = 0x33,

        LD_A_A = 0x7F,
        LD_A_B = 0x78,
        LD_A_C = 0x79,
        LD_A_D = 0x7A,
        LD_A_E = 0x7B,
        LD_A_H = 0x7C,
        LD_A_L = 0x7D,
        LD_A_BC = 0x0A,
        LD_A_DE = 0x1A,
        LD_A_HL = 0x7E,
        LD_A_nn = 0xFA,

        LD_B_B = 0x40,
        LD_B_C = 0x41,
        LD_B_D = 0x42,
        LD_B_E = 0x43,
        LD_B_H = 0x44,
        LD_B_L = 0x45,
        LD_B_HL = 0x46,

        LD_C_B = 0x48,
        LD_C_C = 0x49,
        LD_C_D = 0x4A,
        LD_C_E = 0x4B,
        LD_C_H = 0x4C,
        LD_C_L = 0x4D,
        LD_C_HL = 0x4E,

        LD_D_B = 0x50,
        LD_D_C = 0x51,
        LD_D_D = 0x52,
        LD_D_E = 0x53,
        LD_D_H = 0x54,
        LD_D_L = 0x55,
        LD_D_HL = 0x56,

        LD_E_B = 0x58,
        LD_E_C = 0x59,
        LD_E_D = 0x5A,
        LD_E_E = 0x5B,
        LD_E_H = 0x5C,
        LD_E_L = 0x5D,
        LD_E_HL = 0x5E,

        LD_H_B = 0x60,
        LD_H_C = 0x61,
        LD_H_D = 0x62,
        LD_H_E = 0x63,
        LD_H_H = 0x64,
        LD_H_L = 0x65,
        LD_H_HL = 0x66,

        LD_L_B = 0x68,
        LD_L_C = 0x69,
        LD_L_D = 0x6A,
        LD_L_E = 0x6B,
        LD_L_H = 0x6C,
        LD_L_L = 0x6D,
        LD_L_HL = 0x6E,

        LD_HL_B = 0x70,
        LD_HL_C = 0x71,
        LD_HL_D = 0x72,
        LD_HL_E = 0x73,
        LD_HL_H = 0x74,
        LD_HL_L = 0x75,
        LD_HL_n = 0x36,

        LD_B_A = 0x47,
        LD_C_A = 0x4F,
        LD_D_A = 0x57,
        LD_E_A = 0x5F,
        LD_H_A = 0x67,
        LD_L_A = 0x6F,

        LD_BC_A = 0x02,
        LD_DE_A = 0x12,
        LD_HL_A = 0x77,
        LD_nn_A = 0xEA,

        LD_nn_SP = 0x08,
        LD_SP_HL = 0xF9,

        LDH_n_A = 0xe0,
        LDH_A_n = 0xf0,

        LD_FF00_C_A = 0xe2,
        LD_A_FF00_C = 0xf2,

        BIT_0_A = 0xcb47,
        BIT_0_B = 0xcb40,
        BIT_0_C = 0xcb41,
        BIT_0_D = 0xcb42,
        BIT_0_E = 0xcb43,
        BIT_0_H = 0xcb44,
        BIT_0_L = 0xcb45,
        BIT_0_HL = 0xcb46,

        BIT_1_A = 0xcb4f,
        BIT_1_B = 0xcb48,
        BIT_1_C = 0xcb49,
        BIT_1_D = 0xcb4a,
        BIT_1_E = 0xcb4b,
        BIT_1_H = 0xcb4c,
        BIT_1_L = 0xcb4d,
        BIT_1_HL = 0xcb4e,

        BIT_2_A = 0xcb57,
        BIT_2_B = 0xcb50,
        BIT_2_C = 0xcb51,
        BIT_2_D = 0xcb52,
        BIT_2_E = 0xcb53,
        BIT_2_H = 0xcb54,
        BIT_2_L = 0xcb55,
        BIT_2_HL = 0xcb56,

        BIT_3_A = 0xcb5f,
        BIT_3_B = 0xcb58,
        BIT_3_C = 0xcb59,
        BIT_3_D = 0xcb5a,
        BIT_3_E = 0xcb5b,
        BIT_3_H = 0xcb5c,
        BIT_3_L = 0xcb5d,
        BIT_3_HL = 0xcb5e,

        BIT_4_A = 0xcb67,
        BIT_4_B = 0xcb60,
        BIT_4_C = 0xcb61,
        BIT_4_D = 0xcb62,
        BIT_4_E = 0xcb63,
        BIT_4_H = 0xcb64,
        BIT_4_L = 0xcb65,
        BIT_4_HL = 0xcb66,

        BIT_5_A = 0xcb6f,
        BIT_5_B = 0xcb68,
        BIT_5_C = 0xcb69,
        BIT_5_D = 0xcb6a,
        BIT_5_E = 0xcb6b,
        BIT_5_H = 0xcb6c,
        BIT_5_L = 0xcb6d,
        BIT_5_HL = 0xcb6e,

        BIT_6_A = 0xcb77,
        BIT_6_B = 0xcb70,
        BIT_6_C = 0xcb71,
        BIT_6_D = 0xcb72,
        BIT_6_E = 0xcb73,
        BIT_6_H = 0xcb74,
        BIT_6_L = 0xcb75,
        BIT_6_HL = 0xcb76,

        BIT_7_A = 0xcb7f,
        BIT_7_B = 0xcb78,
        BIT_7_C = 0xcb79,
        BIT_7_D = 0xcb7a,
        BIT_7_E = 0xcb7b,
        BIT_7_H = 0xcb7c,
        BIT_7_L = 0xcb7d,
        BIT_7_HL = 0xcb7e,

        RES_0_A =  0xcb87,
        RES_0_B =  0xcb80,
        RES_0_C =  0xcb81,
        RES_0_D =  0xcb82,
        RES_0_E =  0xcb83,
        RES_0_H =  0xcb84,
        RES_0_L =  0xcb85,
        RES_0_HL = 0xcb86,

        RES_1_A =  0xcb8f,
        RES_1_B =  0xcb88,
        RES_1_C =  0xcb89,
        RES_1_D =  0xcb8a,
        RES_1_E =  0xcb8b,
        RES_1_H =  0xcb8c,
        RES_1_L =  0xcb8d,
        RES_1_HL = 0xcb8e,

        RES_2_A =  0xcb97,
        RES_2_B =  0xcb90,
        RES_2_C =  0xcb91,
        RES_2_D =  0xcb92,
        RES_2_E =  0xcb93,
        RES_2_H =  0xcb94,
        RES_2_L =  0xcb95,
        RES_2_HL = 0xcb96,

        RES_3_A =  0xcb9f,
        RES_3_B =  0xcb98,
        RES_3_C =  0xcb99,
        RES_3_D =  0xcb9a,
        RES_3_E =  0xcb9b,
        RES_3_H =  0xcb9c,
        RES_3_L =  0xcb9d,
        RES_3_HL = 0xcb9e,

        RES_4_A =  0xcba7,
        RES_4_B =  0xcba0,
        RES_4_C =  0xcba1,
        RES_4_D =  0xcba2,
        RES_4_E =  0xcba3,
        RES_4_H =  0xcba4,
        RES_4_L =  0xcba5,
        RES_4_HL = 0xcba6,

        RES_5_A =  0xcbaf,
        RES_5_B =  0xcba8,
        RES_5_C =  0xcba9,
        RES_5_D =  0xcbaa,
        RES_5_E =  0xcbab,
        RES_5_H =  0xcbac,
        RES_5_L =  0xcbad,
        RES_5_HL = 0xcbae,

        RES_6_A =  0xcbb7,
        RES_6_B =  0xcbb0,
        RES_6_C =  0xcbb1,
        RES_6_D =  0xcbb2,
        RES_6_E =  0xcbb3,
        RES_6_H =  0xcbb4,
        RES_6_L =  0xcbb5,
        RES_6_HL = 0xcbb6,

        RES_7_A =  0xcbbf,
        RES_7_B =  0xcbb8,
        RES_7_C =  0xcbb9,
        RES_7_D =  0xcbba,
        RES_7_E =  0xcbbb,
        RES_7_H =  0xcbbc,
        RES_7_L =  0xcbbd,
        RES_7_HL = 0xcbbe,

        SET_0_A = 0xcbc7,
        SET_0_B = 0xcbc0,
        SET_0_C = 0xcbc1,
        SET_0_D = 0xcbc2,
        SET_0_E = 0xcbc3,
        SET_0_H = 0xcbc4,
        SET_0_L = 0xcbc5,
        SET_0_HL = 0xcbc6,

        SET_1_A = 0xcbcf,
        SET_1_B = 0xcbc8,
        SET_1_C = 0xcbc9,
        SET_1_D = 0xcbca,
        SET_1_E = 0xcbcb,
        SET_1_H = 0xcbcc,
        SET_1_L = 0xcbcd,
        SET_1_HL = 0xcbce,

        SET_2_A = 0xcbd7,
        SET_2_B = 0xcbd0,
        SET_2_C = 0xcbd1,
        SET_2_D = 0xcbd2,
        SET_2_E = 0xcbd3,
        SET_2_H = 0xcbd4,
        SET_2_L = 0xcbd5,
        SET_2_HL = 0xcbd6,

        SET_3_A = 0xcbdf,
        SET_3_B = 0xcbd8,
        SET_3_C = 0xcbd9,
        SET_3_D = 0xcbda,
        SET_3_E = 0xcbdb,
        SET_3_H = 0xcbdc,
        SET_3_L = 0xcbdd,
        SET_3_HL = 0xcbde,

        SET_4_A = 0xcbe7,
        SET_4_B = 0xcbe0,
        SET_4_C = 0xcbe1,
        SET_4_D = 0xcbe2,
        SET_4_E = 0xcbe3,
        SET_4_H = 0xcbe4,
        SET_4_L = 0xcbe5,
        SET_4_HL = 0xcbe6,

        SET_5_A = 0xcbef,
        SET_5_B = 0xcbe8,
        SET_5_C = 0xcbe9,
        SET_5_D = 0xcbea,
        SET_5_E = 0xcbeb,
        SET_5_H = 0xcbec,
        SET_5_L = 0xcbed,
        SET_5_HL = 0xcbee,

        SET_6_A = 0xcbf7,
        SET_6_B = 0xcbf0,
        SET_6_C = 0xcbf1,
        SET_6_D = 0xcbf2,
        SET_6_E = 0xcbf3,
        SET_6_H = 0xcbf4,
        SET_6_L = 0xcbf5,
        SET_6_HL = 0xcbf6,

        SET_7_A = 0xcbff,
        SET_7_B = 0xcbf8,
        SET_7_C = 0xcbf9,
        SET_7_D = 0xcbfa,
        SET_7_E = 0xcbfb,
        SET_7_H = 0xcbfc,
        SET_7_L = 0xcbfd,
        SET_7_HL = 0xcbfe,

        CALL_nn = 0xcd,

        CALL_NZ_nn = 0xC4,
        CALL_Z_nn = 0xCC,
        CALL_NC_nn = 0xD4,
        CALL_C_nn = 0xDC,

        RET = 0xc9,
        RETI = 0xD9,

        RET_NZ = 0xC0,
        RET_Z = 0xC8,
        RET_NC = 0xD0,
        RET_C = 0xD8,

        CP_A = 0xBF,
        CP_B = 0xB8,
        CP_C = 0xB9,
        CP_D = 0xBA,
        CP_E = 0xBB,
        CP_H = 0xBC,
        CP_L = 0xBD,
        CP_HL = 0xBE,
        CP_N = 0xFE,

        AND_A = 0xA7,
        AND_B = 0xA0,
        AND_C = 0xA1,
        AND_D = 0xA2,
        AND_E = 0xA3,
        AND_H = 0xA4,
        AND_L = 0xA5,
        AND_MHL = 0xA6,
        AND_PC = 0xE6,

        CPL = 0x2f,

        SWAP_A = 0xCB37,
        SWAP_B = 0xCB30,
        SWAP_C = 0xCB31,
        SWAP_D = 0xCB32,
        SWAP_E = 0xCB33,
        SWAP_H = 0xCB34,
        SWAP_L = 0xCB35,
        SWAP_MHL = 0xCB36,

        PUSH_AF = 0xF5,
        PUSH_BC = 0xC5,
        PUSH_DE = 0xD5,
        PUSH_HL = 0xE5,

        POP_AF = 0xF1,
        POP_BC = 0xC1,
        POP_DE = 0xD1,
        POP_HL = 0xE1,

        RLCA = 0x07,
        RLC_A = 0xCB07,
        RLC_B = 0xCB00,
        RLC_C = 0xCB01,
        RLC_D = 0xCB02,
        RLC_E = 0xCB03,
        RLC_H = 0xCB04,
        RLC_L = 0xCB05,
        RLC_MHL = 0xCB06,

        RLA = 0x17,
        RL_A = 0xcb17,
        RL_B = 0xcb10,
        RL_C = 0xcb11,
        RL_D = 0xcb12,
        RL_E = 0xcb13,
        RL_H = 0xcb14,
        RL_L = 0xcb15,
        RL_HL = 0xcb16,

        SRL_A = 0xcb3F,
        SRL_B = 0xcb38,
        SRL_C = 0xcb39,
        SRL_D = 0xcb3A,
        SRL_E = 0xcb3B,
        SRL_H = 0xcb3C,
        SRL_L = 0xcb3D,
        SRL_MHL = 0xcb3E,


        RR_A = 0xcb1f,
        RR_B = 0xcb18,
        RR_C = 0xcb19,
        RR_D = 0xcb1a,
        RR_E = 0xcb1b,
        RR_H = 0xcb1c,
        RR_L = 0xcb1d,
        RR_HL = 0xcb1e,

        ADD_A = 0x87,
        ADD_B = 0x80,
        ADD_C = 0x81,
        ADD_D = 0x82,
        ADD_E = 0x83,
        ADD_H = 0x84,
        ADD_L = 0x85,
        ADD_MHL = 0x86,
        ADD_N = 0xC6,

        ACD_A_A = 0x8F,
        ACD_A_B = 0x88,
        ACD_A_C = 0x89,
        ACD_A_D = 0x8A,
        ACD_A_E = 0x8B,
        ACD_A_H = 0x8C,
        ACD_A_L = 0x8D,
        ACD_A_MHL = 0x8E,
        ACD_A_MPC = 0xCE,

        SBC_A_A = 0x9F,
        SBC_A_B = 0x98,
        SBC_A_C = 0x99,
        SBC_A_D = 0x9A,
        SBC_A_E = 0x9B,
        SBC_A_H = 0x9C,
        SBC_A_L = 0x9D,
        SBC_A_MHL = 0x9E,
        SBC_A_n = 0xDE,

        ADD_HL_BC = 0x09,
        ADD_HL_DE = 0x19,
        ADD_HL_HL = 0x29,
        ADD_HL_SP = 0x39,

		ADD_SP_n = 0xe8,

        SUB_A = 0x97,
        SUB_B = 0x90,
        SUB_C = 0x91,
        SUB_D = 0x92,
        SUB_E = 0x93,
        SUB_H = 0x94,
        SUB_L = 0x95,
        SUB_MHL = 0x96,
        SUB_N = 0xD6,

        SCF = 0x37,
        CCF = 0x3f,


        DI = 0xf3,
        EI = 0xfb,

        RST_00 = 0xC7,
        RST_08 = 0xCF,
        RST_10 = 0xD7,
        RST_18 = 0xDF,
        RST_20 = 0xE7,
        RST_28 = 0xEF,
        RST_30 = 0xF7,
        RST_38 = 0xFF,
    };

    JFX_INLINE unsigned short readWord( const unsigned char* bytes, int offset );
    JFX_INLINE bool isCBOpcode( Opcode opcode );
    JFX_INLINE unsigned char getDifferentiatingOpcodeByte( Opcode opcode );
    JFX_INLINE Opcode bytesToOpcode( const unsigned char* bytes );

    JFX_INLINE bool isCBOpcode( Opcode opcode )
    {
        return ( opcode & 0xCB00 ) == 0xCB00;
    }

    JFX_INLINE unsigned char getDifferentiatingOpcodeByte( Opcode opcode )
    {
        return static_cast< unsigned char >( opcode >> 8 );
    }
};
